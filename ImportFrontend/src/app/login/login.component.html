<!-- Login -->
<div id="login" *ngIf="loggedIn == false; else elseBlock">
    <input type="text" placeholder="Benutzername" [(ngModel)]="userName">
    <input type="password" placeholder="Password" [(ngModel)]="userPassword">
    <button class="loginButton" (click)="login()">Login</button>
</div>

<!-- Verordnungen new -->
<ng-template #elseBlock>
    <div class="window">
        <div class="welcomeDiv">
            <p>Willkommen im Bereitstellungsmenü für Corona-Verordnungen! Sie können neue Verordnungen ganz einfach über diese Seite erstellen.</p>
            <div class="uploadDiv">
                <select [(ngModel)]="selectedUploadState">
                    <option *ngFor="let state of states">{{state}}</option> 
                </select>
                <button class="importButton" (click)="filteredImport()">Import je Bundesland</button>
                <button class="importButton" (click)="basicImport()">Import aller Bundesländer</button>
            </div>

        </div>
        <div class="tableDiv">
            <div class="entryFieldsDiv">
                <div>
                    Bundesland:
                    <select [(ngModel)]="selectedState" (change)="searchByState(selectedState)">
                        <option *ngFor="let state of states">{{state}}</option> 
                    </select>
                </div>
                <div>
                    Beschreibung:
                    <input class="uploadInput" type="text" placeholder="z.B.: Mindestabstand 3m" [(ngModel)]="descriptionDecree">
                </div>
                <div class="regulationDiv">
                    Einschränkungen:
                    <input class="uploadInput" type="text" placeholder="z.B.: Fußball draußen" [(ngModel)]="regulationsDecree">
                </div>

                <button class="newDecreeButton" (click)="addDecree()">neue Verordnung</button>
            </div>

            <!-- Verordnungen Edit -->
            <div *ngIf="selectedDecreesByStateFiltered.length > 0; else elseBlock">
                <h2>Verordnungen für: {{selectedState}}</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Beschreibung</th>
                            <th>Einschränkungen</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let decree of selectedDecreesByStateFiltered; index as index">
                            <td>
                                <editable (update)="updateField(index, 'description')">
                                    <ng-template viewMode>{{ decree.description }}</ng-template>
                                    <ng-template editMode>
                                        <input [formControl]="getControl(index, 'description')" focusable editableOnEnter>
                                    </ng-template>
                                </editable>
                            </td>
                            <td>
                                <editable (update)="updateField(index, 'regulations')">
                                    <ng-template viewMode>{{ decree.regulations }}</ng-template>
                                    <ng-template editMode>
                                        <input [formControl]="getControl(index, 'regulations')" focusable editableOnEnter>
                                    </ng-template>
                                </editable>
                            </td>

                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <ng-template #elseBlock>
            <p class="noDataText">Ooops! Es konnten keine Verordnungen gefunden werden...</p>
        </ng-template>
    </div>
</ng-template>